<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Informe Oficial" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="3cd7fb0f-b4b7-405f-ada2-1688f71c68c6">
	<property name="ireport.zoom" value="1.4641000000000017"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="109"/>
	<template><![CDATA["../../style.jrtx"]]></template>
	<parameter name="PARAM_tablareldoc" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_reldoc" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_orderdef" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_tabla" class="java.lang.String" isForPrompting="false"/>
	<parameter name="PARAM_subtabla" class="java.lang.String" isForPrompting="false"/>
	<parameter name="PARAM_titulo" class="java.lang.String" isForPrompting="false"/>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["../../subreports/"]]></defaultValueExpression>
	</parameter>
	<parameter name="ORDERBY" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{PARAM_orderdef}]]></defaultValueExpression>
	</parameter>
	<parameter name="WHERE" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["$P!{PARAM_tabla}.codejercicio = '2012' AND $P!{PARAM_tabla}.fecha >= '2012-01-01T00:00:00' AND $P!{PARAM_tabla}.fecha <= '2012-10-20T00:00:00' AND empresa.id = '1'"]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_LOAD_dirEnvio" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["No"]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_LOAD_incoterms" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["No"]]></defaultValueExpression>
	</parameter>
	<parameter name="PARAM_LOAD_seriesobs" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["No"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT $P!{PARAM_tabla}.id$P!{PARAM_subtabla} as id,
	$P!{PARAM_tabla}.codigo as codigo,
	$P!{PARAM_tabla}.codserie as codserie,
	$P!{PARAM_tabla}.total as total,
	$P!{PARAM_tabla}.codejercicio as codejercicio,
	$P!{PARAM_tabla}.codpago as codformapago,
	$P!{PARAM_tabla}.codalmacen as codalmacen,
	$P!{PARAM_tabla}.totaliva as totaliva,
	$P!{PARAM_tabla}.totalrecargo as totalrecargo,
	$P!{PARAM_tabla}.tasaconv as tasaconv,
	$P!{PARAM_tabla}.neto as neto,
	$P!{PARAM_tabla}.irpf as irpf,
	$P!{PARAM_tabla}.totalirpf as totalirpf,
    formaspago.domiciliado as domiciliado,
    ( select impuestos.iva from impuestos where impuestos.codimpuesto = 'GEN' ) as IVA,
 	lineas$P!{PARAM_tabla}.id$P!{PARAM_subtabla} as idlinea,
	lineas$P!{PARAM_tabla}.referencia as referencia,
	lineas$P!{PARAM_tabla}.descripcion as descripcionreferencia,
	lineas$P!{PARAM_tabla}.cantidad as cantidadreferencia,
	lineas$P!{PARAM_tabla}.pvpunitario as referenciaprecio,
	lineas$P!{PARAM_tabla}.pvptotal as pvptotallinea,
	lineas$P!{PARAM_tabla}.codimpuesto as ivalinea,
	lineas$P!{PARAM_tabla}.iva as porivalinea,
    lineas$P!{PARAM_tabla}.dtopor as dtoporreferencia,
    empresa.lopd AS empresa_lopd,
    empresa.rmercantil AS empresa_rmercantil,
	$P!{PARAM_tabla}.neto+$P!{PARAM_tabla}.totaliva+$P!{PARAM_tabla}.totalrecargo
FROM empresa, $P!{PARAM_tabla}
INNER JOIN lineas$P!{PARAM_tabla} ON $P!{PARAM_tabla}.id$P!{PARAM_subtabla} = lineas$P!{PARAM_tabla}.id$P!{PARAM_subtabla}
LEFT OUTER JOIN formaspago ON $P!{PARAM_tabla}.codpago = formaspago.codpago
WHERE $P!{WHERE}
ORDER BY $P!{ORDERBY}]]>
	</queryString>
	<field name="id" class="java.lang.Integer"/>
	<field name="codigo" class="java.lang.String"/>
	<field name="codserie" class="java.lang.String"/>
	<field name="total" class="java.lang.Double"/>
	<field name="codejercicio" class="java.lang.String"/>
	<field name="codformapago" class="java.lang.String"/>
	<field name="codalmacen" class="java.lang.String"/>
	<field name="totaliva" class="java.lang.Double"/>
	<field name="totalrecargo" class="java.lang.Double"/>
	<field name="tasaconv" class="java.lang.Double"/>
	<field name="neto" class="java.lang.Double"/>
	<field name="irpf" class="java.lang.Double"/>
	<field name="totalirpf" class="java.lang.Double"/>
	<field name="idlinea" class="java.lang.Integer"/>
	<field name="referencia" class="java.lang.String"/>
	<field name="descripcionreferencia" class="java.lang.String"/>
	<field name="cantidadreferencia" class="java.lang.Double"/>
	<field name="referenciaprecio" class="java.lang.Double"/>
	<field name="pvptotallinea" class="java.lang.Double"/>
	<field name="ivalinea" class="java.lang.String"/>
	<field name="porivalinea" class="java.lang.Double"/>
	<field name="IVA" class="java.lang.String"/>
	<field name="empresa_rmercantil" class="java.lang.String"/>
	<field name="empresa_lopd" class="java.lang.String"/>
	<field name="dtoporreferencia" class="java.lang.Integer"/>
	<field name="domiciliado" class="java.lang.Boolean"/>
	<variable name="sumaysigue" class="java.math.BigDecimal" resetType="Group" resetGroup="ID" calculation="Sum">
		<variableExpression><![CDATA[$F{pvptotallinea}]]></variableExpression>
	</variable>
	<variable name="sumaysigueround" class="java.lang.Double">
		<variableExpression><![CDATA[$V{sumaysigue}.setScale(2, java.math.RoundingMode.HALF_UP)]]></variableExpression>
	</variable>
	<variable name="sumadtopor" class="java.lang.Double" resetType="Group" resetGroup="ID" calculation="Sum">
		<variableExpression><![CDATA[($F{referenciaprecio} * $F{cantidadreferencia} * $F{dtoporreferencia}) / 100]]></variableExpression>
	</variable>
	<variable name="subreport_count" class="java.lang.Integer"/>
	<group name="ID" isStartNewPage="true" isResetPageNumber="true" isReprintHeaderOnEachPage="true" footerPosition="ForceAtBottom" keepTogether="true">
		<groupExpression><![CDATA[$F{id}]]></groupExpression>
		<groupHeader>
			<band height="80">
				<subreport isUsingCache="false">
					<reportElement x="199" y="3" width="355" height="73" uuid="3aeb2a94-68b1-442d-9502-645a8dc4e236">
						<printWhenExpression><![CDATA[$P{PARAM_tabla} == "facturasprov" || $P{PARAM_tabla} == "albaranesprov" || $P{PARAM_tabla} == "pedidosprov"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_dirEnvio">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_dirEnvio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_incoterms">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_incoterms}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_seriesobs">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_seriesobs}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header_prov.jasper"]]></subreportExpression>
				</subreport>
				<subreport isUsingCache="false">
					<reportElement x="199" y="3" width="355" height="73" uuid="878f5e8b-94e9-47cd-a566-bf5ddcccbf9d">
						<printWhenExpression><![CDATA[$P{PARAM_tabla} == "facturascli" || $P{PARAM_tabla} == "albaranescli" || $P{PARAM_tabla} == "pedidoscli" || $P{PARAM_tabla} == "presupuestoscli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_dirEnvio">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_dirEnvio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_incoterms">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_incoterms}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_seriesobs">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_seriesobs}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header_cliente.jasper"]]></subreportExpression>
				</subreport>
				<subreport isUsingCache="false">
					<reportElement x="0" y="3" width="177" height="73" uuid="9ef9e30e-c16f-4adc-8f83-36312d956b06"/>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PAGE_SUBREPORT">
						<subreportParameterExpression><![CDATA[$V{PAGE_NUMBER}.toString()]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header_codigo.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="40">
				<printWhenExpression><![CDATA[$P{PARAM_LOAD_dirEnvio}.equals( "Si" )]]></printWhenExpression>
				<subreport isUsingCache="false">
					<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="554" height="37" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="555f1066-c394-40ec-a5f4-6ba2d8457856"/>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_dirEnvio">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_dirEnvio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_incoterms">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_incoterms}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_seriesobs">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_seriesobs}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header_direnvio.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="20">
				<elementGroup>
					<staticText>
						<reportElement style="Cabeceras" x="62" y="0" width="287" height="15" uuid="5ea80f58-df36-4a78-99d3-80c39c0a0713"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Descripción]]></text>
					</staticText>
					<staticText>
						<reportElement style="Cabeceras" x="0" y="0" width="60" height="15" uuid="b3bdefc4-ff7e-453e-bfa3-233687821837"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Referencia]]></text>
					</staticText>
					<staticText>
						<reportElement style="Cabeceras" x="445" y="0" width="50" height="15" uuid="055293ce-fdb6-45c9-9b62-07b07f5a3968"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Dto. %]]></text>
					</staticText>
					<staticText>
						<reportElement style="Cabeceras" x="497" y="0" width="58" height="15" uuid="4b4368ca-b9ed-49cf-ac02-a803406acf4c"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Importe]]></text>
					</staticText>
					<staticText>
						<reportElement style="Cabeceras" x="393" y="0" width="50" height="15" uuid="cd02bdf5-ed53-4f5a-971d-2bc69b979113"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Precio]]></text>
					</staticText>
					<staticText>
						<reportElement style="Cabeceras" x="351" y="0" width="40" height="15" uuid="f043f43b-6a18-49b2-9d1e-f176a125419f"/>
						<textElement textAlignment="Center">
							<font fontName="Arial" size="9" isBold="true"/>
						</textElement>
						<text><![CDATA[Cant.]]></text>
					</staticText>
				</elementGroup>
			</band>
			<band height="20">
				<subreport isUsingCache="false">
					<reportElement x="0" y="0" width="555" height="20" isRemoveLineWhenBlank="true" uuid="7c9c6198-7311-4898-b7b0-a5d06c11871c">
						<printWhenExpression><![CDATA[$P{PARAM_tabla} == "facturascli" || $P{PARAM_tabla} == "albaranescli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="PAGE_COUNT" toVariable="subreport_count"/>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "doc_rel.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="20">
				<subreport isUsingCache="false">
					<reportElement x="0" y="0" width="555" height="20" isRemoveLineWhenBlank="true" uuid="5575b67e-67e2-401f-890c-909923d83c94">
						<printWhenExpression><![CDATA[$P{PARAM_tabla} == "facturascli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_LOAD_dirEnvio">
						<subreportParameterExpression><![CDATA[$P{PARAM_LOAD_dirEnvio}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<returnValue subreportVariable="PAGE_COUNT" toVariable="subreport_count"/>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "i_facturascli_deabono.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="42" splitType="Stretch">
				<subreport isUsingCache="false">
					<reportElement x="0" y="1" width="555" height="41" uuid="25b4d44d-ffe3-4787-a0a9-6e332edf91bd"/>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="SUMA_DTO">
						<subreportParameterExpression><![CDATA[$V{sumadtopor}.doubleValue()]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_totales.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="42">
				<subreport>
					<reportElement x="455" y="5" width="100" height="34" uuid="ba7aef0c-4a02-4953-b771-12602672a847">
						<printWhenExpression><![CDATA[$P{PARAM_tabla} == "facturascli" || $P{PARAM_tabla} == "albaranescli" || $P{PARAM_tabla} == "pedidoscli" || $P{PARAM_tabla} == "presupuestoscli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="ID">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "i_facturascli_vencimientos.jasper"]]></subreportExpression>
				</subreport>
				<subreport>
					<reportElement x="282" y="5" width="170" height="35" uuid="7a5dd860-88c0-401c-b414-1d883938e481">
						<printWhenExpression><![CDATA[$F{domiciliado}.booleanValue() == false && $P{PARAM_tabla} == "facturascli" || $P{PARAM_tabla} == "albaranescli" || $P{PARAM_tabla} == "pedidoscli" || $P{PARAM_tabla} == "presupuestoscli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_cuentabco.jasper"]]></subreportExpression>
				</subreport>
				<subreport runToBottom="false">
					<reportElement x="282" y="5" width="170" height="35" uuid="054fc1e8-bd8d-4a72-bae9-1b0efa26c70b">
						<printWhenExpression><![CDATA[$F{domiciliado}.booleanValue() == true && $P{PARAM_tabla} == "facturascli" || $P{PARAM_tabla} == "albaranescli" || $P{PARAM_tabla} == "pedidoscli" || $P{PARAM_tabla} == "presupuestoscli"]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_cuentabcocli.jasper"]]></subreportExpression>
				</subreport>
				<subreport>
					<reportElement stretchType="RelativeToTallestObject" x="0" y="5" width="206" height="35" uuid="dd2a6355-6a0c-4d96-9c40-17309af92797"/>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_totalivas.jasper"]]></subreportExpression>
				</subreport>
				<subreport>
					<reportElement x="224" y="5" width="54" height="34" isRemoveLineWhenBlank="true" uuid="ebb32d8e-df41-4b93-b1d7-988b9e208879">
						<printWhenExpression><![CDATA[$P{PARAM_LOAD_incoterms}.equals( "Si" )]]></printWhenExpression>
					</reportElement>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_incoterms.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="22">
				<subreport isUsingCache="false">
					<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="554" height="20" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="0345c3f7-adc9-447f-b582-04d9d4e8b0d1"/>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_observaciones.jasper"]]></subreportExpression>
				</subreport>
			</band>
			<band height="20">
				<printWhenExpression><![CDATA[$P{PARAM_LOAD_seriesobs}.equals( "Si" )
&& $P{PARAM_tabla} == "facturascli"
|| $P{PARAM_tabla} == "albaranescli"
|| $P{PARAM_tabla} == "pedidoscli"
|| $P{PARAM_tabla} == "presupuestoscli"]]></printWhenExpression>
				<subreport isUsingCache="false">
					<reportElement stretchType="RelativeToTallestObject" x="0" y="0" width="554" height="20" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="71b9ec3b-28c3-4ce0-b453-2896363ab7f5"/>
					<subreportParameter name="SUBREPORT_DIR">
						<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_subtabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_subtabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="WHERE">
						<subreportParameterExpression><![CDATA[$P{WHERE}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tabla">
						<subreportParameterExpression><![CDATA[$P{PARAM_tabla}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ORDERBY">
						<subreportParameterExpression><![CDATA[$P{ORDERBY}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_titulo">
						<subreportParameterExpression><![CDATA[$P{PARAM_titulo}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_orderdef">
						<subreportParameterExpression><![CDATA[$P{PARAM_orderdef}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_reldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_reldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="PARAM_tablareldoc">
						<subreportParameterExpression><![CDATA[$P{PARAM_tablareldoc}]]></subreportParameterExpression>
					</subreportParameter>
					<subreportParameter name="ID_SUBREPORT">
						<subreportParameterExpression><![CDATA[$F{id}]]></subreportParameterExpression>
					</subreportParameter>
					<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "footer_seriesobs.jasper"]]></subreportExpression>
				</subreport>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="92">
			<subreport isUsingCache="false">
				<reportElement x="-1" y="0" width="556" height="92" uuid="134b6849-52ed-482b-9d59-0ace48d348ad"/>
				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
				<subreportExpression><![CDATA[$P{SUBREPORT_DIR} + "header.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageHeader>
	<detail>
		<band height="21" splitType="Immediate">
			<textField isStretchWithOverflow="true">
				<reportElement x="62" y="0" width="287" height="17" uuid="dc8178c9-2748-4eeb-9a9f-90252053b98d"/>
				<textElement>
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcionreferencia}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
				<reportElement x="351" y="0" width="40" height="17" uuid="f88d3006-6144-4bd3-a6d2-f8a51c5c9e22">
					<printWhenExpression><![CDATA[$F{cantidadreferencia} != 0]]></printWhenExpression>
				</reportElement>
				<box leftPadding="0"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{cantidadreferencia}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00" isBlankWhenNull="false">
				<reportElement x="393" y="0" width="50" height="17" uuid="f3e68a67-1a55-4e0a-8943-795a7aa6593f">
					<printWhenExpression><![CDATA[$F{referenciaprecio} != 0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{referenciaprecio}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
				<reportElement x="497" y="0" width="58" height="17" uuid="2c41dcb6-caaf-4455-9238-e051b5164172"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{pvptotallinea}]]></textFieldExpression>
			</textField>
			<textField pattern="###0.00;-###0.00" isBlankWhenNull="false">
				<reportElement x="445" y="0" width="50" height="17" uuid="5bf5fb2c-2fce-4125-9447-34317bd43f39">
					<printWhenExpression><![CDATA[$F{cantidadreferencia} != 0 && $F{dtoporreferencia} != 0]]></printWhenExpression>
				</reportElement>
				<box leftPadding="0"/>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="8"/>
					<paragraph rightIndent="2"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{dtoporreferencia}]]></textFieldExpression>
			</textField>
			<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
				<reportElement x="0" y="0" width="60" height="17" uuid="3f12babc-5e82-43c6-af94-bf258fa87894">
					<printWhenExpression><![CDATA[$F{referencia} != 0]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left">
					<font fontName="Arial" size="8"/>
					<paragraph leftIndent="2"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{referencia}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="62" splitType="Stretch">
			<textField pattern="#,##0.00;-#,##0.00">
				<reportElement x="476" y="-1" width="78" height="15" uuid="0870b338-dc40-4f9f-ac11-33c2f28229ce">
					<printWhenExpression><![CDATA[!$V{sumaysigueround}.equals($F{neto})]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{sumaysigueround}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="382" y="-1" width="91" height="15" uuid="9d2db475-52f6-4bc5-a4ab-2165f7f53cee">
					<printWhenExpression><![CDATA[!$V{sumaysigueround}.equals($F{neto})]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Right">
					<font fontName="Arial" size="9" isBold="true"/>
				</textElement>
				<text><![CDATA[Suma y sigue:]]></text>
			</staticText>
			<elementGroup>
				<textField isBlankWhenNull="true">
					<reportElement x="0" y="14" width="555" height="14" uuid="371bc6b5-1306-425e-902a-b6ca8f4716cb"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="Arial" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{empresa_rmercantil}]]></textFieldExpression>
				</textField>
				<textField isBlankWhenNull="true">
					<reportElement x="0" y="27" width="555" height="35" uuid="ee4b2559-eafd-421a-a18b-6412efbd592d"/>
					<textElement textAlignment="Center">
						<font fontName="SansSerif" size="6"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{empresa_lopd}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="13" width="555" height="1" forecolor="#AAAAAA" uuid="f992d50c-406c-453c-b5b8-66a2adede0f4"/>
				</line>
			</elementGroup>
		</band>
	</pageFooter>
</jasperReport>
